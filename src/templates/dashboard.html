{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      name="description"
      content="Start your development with a Design System for Bootstrap 4."
    />
    <meta name="author" content="Creative Tim" />
    <title>Argon Design System - Free Design System for Bootstrap 4</title>
    <!-- Favicon -->
    <link
      href="{% static 'assets/img/brand/favicon.png' %}"
      rel="icon"
      type="image/png"
    />
    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"
      rel="stylesheet"
    />
    <!-- Icons -->
    <link
      href="{% static 'assets/vendor/nucleo/css/nucleo.css' %}"
      rel="stylesheet"
    />
    <link
      href="{% static 'assets/vendor/font-awesome/css/font-awesome.min.css' %}"
      rel="stylesheet"
    />
    <!-- Argon CSS -->
    <link
      type="text/css"
      href="{% static 'assets/css/argon.min.css' %}"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'assets/css/style.css' %}" />
  </head>

  <body>
    <!-- Sidebar -->
    <div class="row">
      <div class="col-md-2">
        <div class="row justify-content-center bg-primary">
          <div class="logo">
            <a class="h3 text-white text-center" href="{% url 'dashboard' %}"
              >SeeLife</a
            >
          </div>
        </div>
        <div class="sidebar">
          <div class="row justify-content-center font-bold">
            <a
              class="h3 heading mt-3 mb-2 btn btn-link text-primary"
              href="{% url 'dashboard' %}"
              >Home</a
            >
          </div>
          <div class="dropdown-divider mx-3"></div>
          <div class="row justify-content-center">
            <a
              class="h3 heading mt-3 mb-2 btn btn-link text-default"
              href="{% url 'accounts:members' %}"
              >Members</a
            >
          </div>
          <div class="dropdown-divider mx-3"></div>
          <div class="row justify-content-center">
            <a
              class="h3 heading mt-3 mb-2 btn btn-link text-default"
              href="{% url 'accounts:volunteers' %}"
              >Volunteers</a
            >
          </div>
          <div class="dropdown-divider mx-3"></div>
          <div class="row justify-content-center">
            <a
              class="h3 heading mt-3 mb-2 btn btn-link text-default"
              href="{% url 'accounts:donors' %}"
              >Donors</a
            >
          </div>
          <div class="dropdown-divider mx-3"></div>
          <div class="row justify-content-center">
            <a
              class="h3 heading mt-3 mb-2 btn btn-link text-default"
              href="{% url 'forum:list' %}"
              >Forum</a
            >
          </div>
          <div class="dropdown-divider mx-3"></div>
        </div>
      </div>
      <div class="col-md-10 px-0">
        <div class="row">
          <div class="col">
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
              <!-- <div class="container"> -->
              <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbar-default"
                aria-controls="navbar-default"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbar-default">
                <div class="navbar-collapse-header">
                  <div class="row">
                    <div class="col-6 collapse-brand"></div>
                    <div class="col-6 collapse-close">
                      <button
                        type="button"
                        class="navbar-toggler"
                        data-toggle="collapse"
                        data-target="#navbar-default"
                        aria-controls="navbar-default"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                      >
                        <span></span>
                        <span></span>
                      </button>
                    </div>
                  </div>
                </div>
                <ul class="navbar-nav ml-lg-auto mr-5">
                  <li class="nav-item dropdown">
                    <a
                      class="nav-link nav-link-icon"
                      href="#"
                      id="navbar-default_dropdown_1"
                      role="button"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="ni ni-single-02"></i>
                      <span class="nav-link-inner--text">{{ user.name }}</span>
                    </a>
                    <div
                      class="dropdown-menu dropdown-menu-right"
                      aria-labelledby="navbar-default_dropdown_1"
                    >
                      <a
                        class="dropdown-item"
                        href="javascript:{document.getElementById('logout').submit()}"
                        >Logout</a
                      >
                      <form
                        action="{% url 'accounts:logout' %}"
                        method="POST"
                        id="logout"
                      >
                        {% csrf_token %}
                        <input type="hidden" />
                      </form>
                    </div>
                  </li>
                </ul>
              </div>
              <!-- </div> -->
            </nav>
          </div>
        </div>
        <div class="container-fluid">
          <div class="row justify-content-center">
            <div class="col-lg-8 col-md-12 mt-4">
              <div class="card shadow border-0">
                <div class="card-body p-5">
                  <h6 class="h3 text-black text-center text-uppercase mb-5">
                    Donations
                  </h6>
                  <div
                    id="chartContainer"
                    style="height: 500px; width: 100%;"
                  ></div>
                  <input
                    type="hidden"
                    id="myVar"
                    name="donations"
                    value="{{ donations }}"
                  />
                </div>
              </div>
            </div>
            <div class="col-lg-3 col-md-12">
              <div class="row justify-content-center">
                <div class="col-12 mt-4">
                  <div class="card shadow border-0">
                    <div class="card-body py-5">
                      <h6 class="text-primary text-uppercase">
                        <i class="ni ni-money-coins mr-3"></i>Total Donations
                      </h6>
                      <p class="h3 mt-3">&#8377; {{ total }}</p>
                    </div>
                  </div>
                </div>
                <div class="col-12 mt-4">
                  <div class="card shadow border-0">
                    <div class="card-body py-5">
                      <h6 class="text-primary text-uppercase">
                        <i class="ni ni-circle-08 mr-3"></i>Members
                      </h6>
                      <p class="h3 mt-3">{{ members }}</p>
                      <div></div>
                    </div>
                  </div>
                </div>
                <div class="col-12 mt-4">
                  <div class="card shadow border-0">
                    <div class="card-body py-5">
                      <h6 class="text-primary text-uppercase">
                        <i class="ni ni-notification-70 mr-3"></i>Volunteers
                      </h6>
                      <p class="h3 mt-3">{{ volunteer }}</p>
                      <div></div>
                    </div>
                  </div>
                </div>
                <div class="col-12 mt-4">
                  <div class="card shadow border-0">
                    <div class="card-body py-5">
                      <h6 class="text-primary text-uppercase">
                        <i class="ni ni-favourite-28 mr-3"></i>Donors
                      </h6>
                      <p class="h3 mt-3">{{ donors }}</p>
                      <div></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Core -->
    <script src="{% static 'assets/vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'assets/vendor/popper/popper.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/vendor/headroom/headroom.min.js' %}"></script>
    <!-- Optional JS -->
    <script src="{% static 'assets/vendor/onscreen/onscreen.min.js' %}"></script>
    <script src="{% static 'assets/vendor/nouislider/js/nouislider.min.js' %}"></script>
    <script src="{% static 'assets/vendor/bootstrap-datepicker/js/bootstrap-datepicker.min.js' %}"></script>
    <!-- Argon JS -->
    <script src="{% static 'assets/js/argon.min.js' %}"></script>
    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
    <script>
      window.onload = function() {
        var myVar = document.getElementById("myVar").value;
        var data = JSON.parse(myVar);
        console.log(data);
        var dataArray = [];
        var month = [];
        month[0] = "January";
        month[1] = "February";
        month[2] = "March";
        month[3] = "April";
        month[4] = "May";
        month[5] = "June";
        month[6] = "July";
        month[7] = "August";
        month[8] = "September";
        month[9] = "October";
        month[10] = "November";
        month[11] = "December";
        for (var i = 0; i < data.length; i++) {
          console.log(data[i]);
          dataArray.push({
            y: data[i]["amount"],
            label: month[data[i]["month"] - 1] + " " + data[i]["year"]
          });
        }
        var chart = new CanvasJS.Chart("chartContainer", {
          theme: "light2", // "light1", "light2", "dark1", "dark2"
          // exportEnabled: true,
          animationEnabled: true,
          // title: {
          //     text: "Donations"
          // },
          data: [
            {
              type: "column",
              startAngle: 25,
              toolTipContent: "<b>{label}</b>: Amount {y}",
              //showInLegend: "true",
              //legendText: "{label}",
              indexLabelFontSize: 16,

              //indexLabel: "{label} - {y}%",
              dataPoints: dataArray
              //   dataPoints: [
              //     { y: 51.08, label: "January" },
              //     { y: 27.34, label: "February" },
              //     { y: 10.62, label: "March" },
              //     { y: 45.02, label: "April" },
              //     { y: 24.07, label: "May" },
              //     { y: 17.22, label: "June" },
              //     { y: 20.44, label: "July" },
              //     { y: 37.9, label: "August" },
              //     { y: 12.43, label: "September" },
              //     { y: 10.2, label: "October" },
              //     { y: 19.63, label: "November" },
              //     { y: 32.7, label: "December" }
              //   ]
            }
          ]
        });
        chart.render();
      };
    </script>
  </body>
</html>
